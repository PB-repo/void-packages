# Template file for 'libappindicator-gtk2'
pkgname=libappindicator-gtk2
version=12.10.0
revision=1
wrksrc="libappindicator-${version}"
build_style=gnu-configure
configure_args="--with-gtk=2 --disable-tests"
hostmakedepends="pkg-config glib-devel python"
makedepends="gtk+-devel glib-devel glib-networking libdbusmenu-glib-devel
 libdbusmenu-gtk2-devel libindicator-gtk2-devel dbus-glib-devel python-devel
 python-gobject2-devel pygtk-devel"
depends="libindicator-gtk2>=${version}_${revision}"
short_desc="Library to allow applications to export a menu (GTK+2)"
maintainer="Piotr Balcerowski <piotr@balcerowski.org>"
license="LGPL-2.1"
homepage="https://launchpad.net/libappindicator"
distfiles="https://launchpad.net/libappindicator/${version%.*}/${version}/+download/libappindicator-${version}.tar.gz"
checksum=d5907c1f98084acf28fd19593cb70672caa0ca1cf82d747ba6f4830d4cc3b49f

CFLAGS="-Wno-deprecated-declarations -Wno-error=incompatible-pointer-types"

pre_configure() {
	if [ "$CROSS_BUILD" ]; then
	 sed -i 's:^py_prefix=`:py_prefix='"$XBPS_CROSS_BASE"'`:' configure
	fi
}

libappindicator-gtk2-devel_package() {
	short_desc+=" - development files"
	depends="libindicator-gtk2-devel>=${version}_${revision}
	 {sourcepkg}>=${version}_${revision}"
	pkg_install() {
		vmove usr/include
		vmove usr/lib/pkgconfig
		vmove usr/lib/*.so
		vmove usr/lib/*.a
	}
}
